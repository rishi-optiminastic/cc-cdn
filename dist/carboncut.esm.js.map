{"version":3,"file":"carboncut.esm.js","sources":["../src/utils/helpers.js","../src/core/config.js","../src/core/state.js","../src/utils/uuid.js","../src/core/session.js","../src/utils/logger.js","../src/transport/api.js","../src/transport/api-worker.js","../src/tracking/event.js","../src/tracking/ping.js","../src/tracking/pageview.js","../src/listeners/browser.js","../src/index.js"],"sourcesContent":["/**\n * Get tracker token from URL parameter\n * @returns {string|null} Tracker token\n */\nexport function getTrackerFromURL() {\n  if (typeof window === 'undefined') return null;\n  const params = new URLSearchParams(window.location.search);\n  return params.get('cc_tracker');\n}\n\n/**\n * Get browser metadata\n * @returns {Object} Browser metadata\n */\nexport function getBrowserMetadata() {\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    return {};\n  }\n\n  return {\n    user_agent: navigator.userAgent,\n    screen_resolution: `${window.screen.width}x${window.screen.height}`,\n    viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n    language: navigator.language,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    referrer: document.referrer || 'direct',\n    page_url: window.location.href,\n    page_title: document.title\n  };\n}\n\n/**\n * Get current page info\n * @returns {Object} Page info\n */\nexport function getPageInfo() {\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    return {};\n  }\n\n  return {\n    page_path: window.location.pathname,\n    page_url: window.location.href,\n    page_title: document.title,\n    referrer: document.referrer\n  };\n}\n\n/**\n * Check if code is running in browser\n * @returns {boolean}\n */\nexport function isBrowser() {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n","import { getTrackerFromURL } from '../utils/helpers.js';\n\n/**\n * Configuration manager\n */\nexport class Config {\n  constructor() {\n    this.defaults = {\n      trackerToken: null,\n      apiUrl: 'http://127.0.0.1:8000/api/v1/events/',\n      sessionId: null,\n      pingInterval: 15000, // 15 seconds\n      debug: false,\n      autoTrack: true, \n      respectDoNotTrack: true, \n      maxRetries: 3,\n      retryDelay: 1000,\n      domain: null,\n    };\n    \n    this.config = { ...this.defaults };\n  }\n\n  /**\n   * Initialize configuration\n   * @param {Object} options User options\n   * @returns {boolean} Success status\n   */\n  init(options = {}) {\n    this.config = {\n      ...this.defaults,\n      ...options,\n      trackerToken: options.trackerToken || getTrackerFromURL()\n    };\n\n    return this.validate();\n  }\n\n  /**\n   * Validate configuration\n   * @returns {boolean} Is valid\n   */\n  validate() {\n    if (!this.config.trackerToken) {\n      console.error('CarbonCut: No tracker token provided. Add data-token=\"YOUR_TOKEN\" to script tag.');\n      return false;\n    }\n\n    if (!this.config.apiUrl) {\n      console.error('CarbonCut: API URL is required');\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Get configuration value\n   * @param {string} key Configuration key\n   * @returns {*} Configuration value\n   */\n  get(key) {\n    return this.config[key];\n  }\n\n  /**\n   * Set configuration value\n   * @param {string} key Configuration key\n   * @param {*} value Configuration value\n   */\n  set(key, value) {\n    this.config[key] = value;\n  }\n\n  /**\n   * Get all configuration\n   * @returns {Object} All configuration\n   */\n  getAll() {\n    return { ...this.config };\n  }\n}","/**\n * Global state management\n */\nexport class State {\n  constructor() {\n    this.state = {\n      isInitialized: false,\n      timeSpent: 0,\n      lastPath: null,\n      retryCount: 0\n    };\n  }\n\n  /**\n   * Get state value\n   * @param {string} key State key\n   * @returns {*} State value\n   */\n  get(key) {\n    return this.state[key];\n  }\n\n  /**\n   * Set state value\n   * @param {string} key State key\n   * @param {*} value State value\n   */\n  set(key, value) {\n    this.state[key] = value;\n  }\n\n  /**\n   * Increment time spent\n   * @param {number} seconds Seconds to add\n   */\n  incrementTimeSpent(seconds) {\n    this.state.timeSpent += seconds;\n  }\n\n  /**\n   * Reset state\n   */\n  reset() {\n    this.state = {\n      isInitialized: false,\n      timeSpent: 0,\n      lastPath: null,\n      retryCount: 0\n    };\n  }\n\n  /**\n   * Get all state\n   * @returns {Object} All state\n   */\n  getAll() {\n    return { ...this.state };\n  }\n}","/**\n * Generate a UUID v4\n * @returns {string} UUID\n */\nexport function generateUUID() {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID();\n  }\n  \n  // Fallback for older browsers\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}","import { generateUUID } from '../utils/uuid.js';\n\n/**\n * Session management\n */\nexport class Session {\n  constructor(config, logger) {\n    this.config = config;\n    this.logger = logger;\n    this.sessionId = null;\n  }\n\n  /**\n   * Start a new session\n   * @returns {string} Session ID\n   */\n  start() {\n    this.sessionId = generateUUID();\n    this.config.set('sessionId', this.sessionId);\n    \n    // Store in window for external access\n    if (typeof window !== 'undefined') {\n      window.__CC_SESSION_ID = this.sessionId;\n      window.__CC_TRACKER_TOKEN = this.config.get('trackerToken');\n    }\n    \n    this.logger.log('Session started:', this.sessionId);\n    return this.sessionId;\n  }\n\n  /**\n   * Get current session ID\n   * @returns {string|null} Session ID\n   */\n  getId() {\n    return this.sessionId;\n  }\n\n  /**\n   * End current session\n   */\n  end() {\n    this.logger.log('Session ended:', this.sessionId);\n    this.sessionId = null;\n    this.config.set('sessionId', null);\n  }\n\n  /**\n   * Check if session is active\n   * @returns {boolean} Is active\n   */\n  isActive() {\n    return this.sessionId !== null;\n  }\n}","/**\n * Logger utility with debug mode support\n */\nexport class Logger {\n  constructor(debug = false) {\n    this.debug = debug;\n    this.prefix = 'CarbonCut:';\n  }\n\n  setDebug(debug) {\n    this.debug = debug;\n  }\n\n  log(...args) {\n    if (this.debug) {\n      console.log(this.prefix, ...args);\n    }\n  }\n\n  warn(...args) {\n    if (this.debug) {\n      console.warn(this.prefix, ...args);\n    }\n  }\n\n  error(...args) {\n    console.error(this.prefix, ...args);\n  }\n\n  info(...args) {\n    if (this.debug) {\n      console.info(this.prefix, ...args);\n    }\n  }\n}","/**\n * API transport layer\n */\nexport class ApiTransport {\n  constructor(config, logger) {\n    this.config = config;\n    this.logger = logger;\n    this.queue = [];\n    this.isOnline = typeof navigator !== 'undefined' ? navigator.onLine : true;\n    \n    if (typeof window !== 'undefined') {\n      this.setupOnlineListener();\n    }\n  }\n\n  /**\n   * Setup online/offline listener\n   */\n  setupOnlineListener() {\n    window.addEventListener('online', () => {\n      this.isOnline = true;\n      this.logger.log('Connection restored, flushing queue');\n      this.flushQueue();\n    });\n\n    window.addEventListener('offline', () => {\n      this.isOnline = false;\n      this.logger.warn('Connection lost, events will be queued');\n    });\n  }\n\n  /**\n   * Send event to API\n   * @param {Object} payload Event payload\n   * @returns {Promise<boolean>} Success status\n   */\n  async send(payload) {\n    if (!this.isOnline) {\n      this.logger.warn('Offline, queueing event');\n      this.queue.push(payload);\n      return false;\n    }\n\n    const apiUrl = this.config.get('apiUrl');\n    \n    try {\n      // Try sendBeacon first (for session_end and critical events)\n      if (this.shouldUseSendBeacon(payload.event)) {\n        const success = this.sendViaBeacon(apiUrl, payload);\n        if (success) {\n          this.logger.log('Event sent via sendBeacon:', payload.event);\n          return true;\n        }\n      }\n\n      // Fallback to fetch\n      await this.sendViaFetch(apiUrl, payload);\n      this.logger.log('Event sent via fetch:', payload.event);\n      return true;\n\n    } catch (error) {\n      this.logger.error('Failed to send event:', error);\n      this.queue.push(payload);\n      return false;\n    }\n  }\n\n  /**\n   * Send via sendBeacon\n   * @param {string} url API URL\n   * @param {Object} payload Event payload\n   * @returns {boolean} Success status\n   */\n  sendViaBeacon(url, payload) {\n    if (typeof navigator === 'undefined' || !navigator.sendBeacon) {\n      return false;\n    }\n\n    try {\n      const blob = new Blob([JSON.stringify(payload)], { \n        type: 'application/json' \n      });\n      return navigator.sendBeacon(url, blob);\n    } catch (error) {\n      this.logger.error('sendBeacon failed:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Send via fetch\n   * @param {string} url API URL\n   * @param {Object} payload Event payload\n   * @returns {Promise<Response>} Fetch response\n   */\n  async sendViaFetch(url, payload) {\n    this.logger.log('Sending via fetch to:', url, payload);\n    \n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Tracker-Token': this.config.get('trackerToken')\n      },\n      body: JSON.stringify(payload),\n      keepalive: true\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    return response;\n  }\n\n  /**\n   * Check if event should use sendBeacon\n   * @param {string} eventType Event type\n   * @returns {boolean} Should use sendBeacon\n   */\n  shouldUseSendBeacon(eventType) {\n    return ['session_end', 'page_unload'].includes(eventType);\n  }\n\n  /**\n   * Flush queued events\n   */\n  async flushQueue() {\n    if (this.queue.length === 0) return;\n\n    this.logger.log(`Flushing ${this.queue.length} queued events`);\n    const queue = [...this.queue];\n    this.queue = [];\n\n    for (const payload of queue) {\n      const success = await this.send(payload);\n      if (!success) {\n        // Re-queue if failed\n        this.queue.push(payload);\n      }\n    }\n  }\n\n  /**\n   * Get queue size\n   * @returns {number} Queue size\n   */\n  getQueueSize() {\n    return this.queue.length;\n  }\n}","/**\n * API Transport using Web Worker\n */\nexport class ApiWorkerTransport {\n  constructor(config, logger) {\n    this.config = config;\n    this.logger = logger;\n    this.worker = null;\n    this.isSupported = this.checkWorkerSupport();\n    this.queueSize = 0;\n    \n    if (this.isSupported) {\n      this.initWorker();\n    } else {\n      this.logger.warn('Web Workers not supported, falling back to main thread');\n    }\n  }\n\n  /**\n   * Check if Web Workers are supported\n   */\n  checkWorkerSupport() {\n    return typeof Worker !== 'undefined';\n  }\n\n  /**\n   * Initialize Web Worker\n   */\n  initWorker() {\n    try {\n      // Inline worker using Blob URL\n      const workerCode = this.getWorkerCode();\n      const blob = new Blob([workerCode], { type: 'application/javascript' });\n      const workerUrl = URL.createObjectURL(blob);\n      \n      this.worker = new Worker(workerUrl);\n      \n      // Listen for messages from worker\n      this.worker.addEventListener('message', (event) => {\n        this.handleWorkerMessage(event.data);\n      });\n      \n      // Listen for errors\n      this.worker.addEventListener('error', (error) => {\n        this.logger.error('Worker error:', error);\n      });\n      \n      // Initialize worker with config\n      this.worker.postMessage({\n        type: 'INIT',\n        payload: {\n          apiUrl: this.config.get('apiUrl'),\n          trackerToken: this.config.get('trackerToken'),\n          batchSize: 10,\n          batchInterval: 5000 // Flush every 5 seconds\n        }\n      });\n      \n      // Setup online/offline detection\n      this.setupOnlineListener();\n      \n      this.logger.log('Web Worker initialized for event processing');\n    } catch (error) {\n      this.logger.error('Failed to initialize worker:', error);\n      this.worker = null;\n    }\n  }\n\n  /**\n   * Get worker code as string\n   */\n  getWorkerCode() {\n    // Return the worker code from event-worker.js as string\n    // In production, this would be bundled separately\n    return `\n      let config = null;\n      let eventQueue = [];\n      let flushTimer = null;\n      let isOnline = true;\n\n      self.addEventListener('message', async (event) => {\n        const { type, payload } = event.data;\n\n        switch (type) {\n          case 'INIT':\n            config = payload;\n            if (config.batchInterval) {\n              flushTimer = setInterval(() => {\n                if (eventQueue.length > 0) {\n                  flushQueue();\n                }\n              }, config.batchInterval);\n            }\n            self.postMessage({ type: 'INIT_SUCCESS' });\n            break;\n          \n          case 'TRACK_EVENT':\n            eventQueue.push({ ...payload, queuedAt: Date.now() });\n            if (eventQueue.length >= (config.batchSize || 10)) {\n              flushQueue();\n            }\n            break;\n          \n          case 'FLUSH_QUEUE':\n            await flushQueue();\n            break;\n          \n          case 'ONLINE':\n            isOnline = true;\n            await flushQueue();\n            break;\n          \n          case 'OFFLINE':\n            isOnline = false;\n            break;\n          \n          case 'GET_QUEUE_SIZE':\n            self.postMessage({ type: 'QUEUE_SIZE', size: eventQueue.length });\n            break;\n        }\n      });\n\n      async function flushQueue() {\n        if (eventQueue.length === 0 || !isOnline) return;\n        \n        const batch = [...eventQueue];\n        eventQueue = [];\n        \n        try {\n          const response = await fetch(config.apiUrl, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'X-Tracker-Token': config.trackerToken\n            },\n            body: JSON.stringify({ events: batch, batch: true }),\n            keepalive: true\n          });\n          \n          if (!response.ok) throw new Error(\\`HTTP \\${response.status}\\`);\n          \n          self.postMessage({ type: 'FLUSH_SUCCESS', count: batch.length });\n        } catch (error) {\n          eventQueue.push(...batch);\n          self.postMessage({ type: 'FLUSH_ERROR', error: error.message, count: batch.length });\n        }\n      }\n    `;\n  }\n\n  /**\n   * Handle messages from worker\n   */\n  handleWorkerMessage(data) {\n    const { type, count, error, size } = data;\n    \n    switch (type) {\n      case 'INIT_SUCCESS':\n        this.logger.log('Worker ready');\n        break;\n      \n      case 'FLUSH_SUCCESS':\n        this.logger.log(`Worker flushed ${count} events`);\n        break;\n      \n      case 'FLUSH_ERROR':\n        this.logger.error(`Worker flush failed: ${error}`);\n        break;\n      \n      case 'QUEUE_SIZE':\n        this.queueSize = size;\n        break;\n    }\n  }\n\n  /**\n   * Setup online/offline listener\n   */\n  setupOnlineListener() {\n    window.addEventListener('online', () => {\n      this.worker?.postMessage({ type: 'ONLINE' });\n    });\n\n    window.addEventListener('offline', () => {\n      this.worker?.postMessage({ type: 'OFFLINE' });\n    });\n  }\n\n  /**\n   * Send event (queued in worker)\n   */\n  async send(payload) {\n    if (!this.worker) {\n      // Fallback to direct fetch if worker not available\n      return this.sendDirect(payload);\n    }\n    \n    this.worker.postMessage({\n      type: 'TRACK_EVENT',\n      payload\n    });\n    \n    return true; // Event queued in worker\n  }\n\n  /**\n   * Direct send fallback (no worker)\n   */\n  async sendDirect(payload) {\n    try {\n      const response = await fetch(this.config.get('apiUrl'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Tracker-Token': this.config.get('trackerToken')\n        },\n        body: JSON.stringify(payload),\n        keepalive: true\n      });\n      \n      return response.ok;\n    } catch (error) {\n      this.logger.error('Direct send failed:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Flush queue immediately\n   */\n  async flushQueue() {\n    this.worker?.postMessage({ type: 'FLUSH_QUEUE' });\n  }\n\n  /**\n   * Get queue size\n   */\n  getQueueSize() {\n    if (!this.worker) return 0;\n    \n    this.worker.postMessage({ type: 'GET_QUEUE_SIZE' });\n    return this.queueSize;\n  }\n\n  /**\n   * Terminate worker\n   */\n  terminate() {\n    if (this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n      this.logger.log('Worker terminated');\n    }\n  }\n}","/**\n * Event tracker\n */\nexport class EventTracker {\n  constructor(config, session, transport, logger) {\n    this.config = config;\n    this.session = session;\n    this.transport = transport;\n    this.logger = logger;\n    this.sentEvents = new Map(); // ← ADD: Track sent events to prevent duplicates\n  }\n\n  /**\n   * Send event to transport\n   * @param {string} event Event type\n   * @param {Object} data Event data\n   */\n  send(event, data = {}) {\n    if (!this.session.isActive()) {\n      this.logger.error('Cannot send event without active session');\n      return;\n    }\n\n    const payload = {\n      event,\n      session_id: this.session.getId(),\n      tracker_token: this.config.get('trackerToken'),\n      timestamp: new Date().toISOString(),\n      ...data\n    };\n\n    // Create unique event key to prevent duplicates\n    const eventKey = `${event}_${payload.timestamp}_${JSON.stringify(data)}`;\n    \n    // Check if event was already sent in last 1 second\n    if (this.sentEvents.has(eventKey)) {\n      this.logger.warn('Duplicate event prevented:', event);\n      return;\n    }\n\n    // Mark event as sent\n    this.sentEvents.set(eventKey, Date.now());\n    \n    // Clean up old entries after 2 seconds\n    setTimeout(() => {\n      this.sentEvents.delete(eventKey);\n    }, 2000);\n\n    // Send to transport\n    this.transport.send(payload);\n  }\n\n  /**\n   * Track custom event\n   * @param {string} eventName Custom event name\n   * @param {Object} data Event data\n   */\n  trackCustomEvent(eventName, data = {}) {\n    this.send('custom_event', {\n      event_name: eventName,\n      event_data: data,\n      page_url: typeof window !== 'undefined' ? window.location.href : null\n    });\n    \n    this.logger.log('Custom event tracked:', eventName);\n  }\n}","/**\n * Ping mechanism for time tracking\n */\nexport class PingTracker {\n  constructor(config, state, eventTracker, logger) {\n    this.config = config;\n    this.state = state;\n    this.eventTracker = eventTracker;\n    this.logger = logger;\n    this.timer = null;\n  }\n\n  /**\n   * Start ping timer\n   */\n  start() {\n    this.stop(); // Clear any existing timer\n\n    const interval = this.config.get('pingInterval');\n    \n    this.timer = setInterval(() => {\n      const seconds = interval / 1000;\n      this.state.incrementTimeSpent(seconds);\n      this.ping();\n    }, interval);\n\n    this.logger.log(`Ping timer started. Interval: ${interval / 1000}s`);\n  }\n\n  /**\n   * Stop ping timer\n   */\n  stop() {\n    if (this.timer) {\n      clearInterval(this.timer);\n      this.timer = null;\n      this.logger.log('Ping timer stopped');\n    }\n  }\n\n  /**\n   * Send ping event\n   */\n  ping() {\n    this.eventTracker.send('ping', {\n      time_spent_seconds: this.state.get('timeSpent'),\n      page_url: typeof window !== 'undefined' ? window.location.href : null,\n      is_visible: typeof document !== 'undefined' ? !document.hidden : true\n    });\n  }\n\n  /**\n   * Manually trigger ping\n   */\n  trigger() {\n    this.ping();\n  }\n\n  /**\n   * Check if timer is running\n   * @returns {boolean} Is running\n   */\n  isRunning() {\n    return this.timer !== null;\n  }\n}","import { getPageInfo } from '../utils/helpers.js';\n\n/**\n * Page view tracking\n */\nexport class PageViewTracker {\n  constructor(config, state, eventTracker, logger) {\n    this.config = config;\n    this.state = state;\n    this.eventTracker = eventTracker;\n    this.logger = logger;\n  }\n\n  /**\n   * Track page view\n   * @param {string} pagePath Page path (optional)\n   */\n  track(pagePath) {\n    const pageInfo = getPageInfo();\n    \n    if (pagePath) {\n      pageInfo.page_path = pagePath;\n    }\n\n    this.eventTracker.send('page_view', pageInfo);\n    this.state.set('lastPath', pageInfo.page_path);\n    this.logger.log('Page view tracked:', pageInfo.page_path);\n  }\n}","\n/**\n * Browser event listeners\n */\nexport class BrowserListeners {\n  constructor(config, state, session, eventTracker, pingTracker, pageViewTracker, logger) {\n    this.config = config;\n    this.state = state;\n    this.session = session;\n    this.eventTracker = eventTracker;\n    this.pingTracker = pingTracker;\n    this.pageViewTracker = pageViewTracker;\n    this.logger = logger;\n  }\n\n  /**\n   * Setup all browser event listeners\n   */\n  setup() {\n    if (typeof window === 'undefined') return;\n\n    this.setupUnloadListener();\n    this.setupVisibilityListener();\n    \n    if (this.config.get('autoTrack')) {\n      this.setupNavigationListeners();\n    }\n  }\n\n  /**\n   * Setup beforeunload listener\n   */\n  setupUnloadListener() {\n    window.addEventListener('beforeunload', () => {\n      this.pingTracker.stop();\n      this.eventTracker.send('session_end', {\n        total_time_spent_seconds: this.state.get('timeSpent'),\n        page_url: window.location.href\n      });\n      this.session.end();\n    });\n  }\n\n  /**\n   * Setup visibility change listener\n   */\n  setupVisibilityListener() {\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.pingTracker.stop();\n        this.logger.log('Page hidden, ping timer paused');\n      } else {\n        this.pingTracker.start();\n        this.logger.log('Page visible, ping timer resumed');\n      }\n    });\n  }\n\n  /**\n   * Setup navigation listeners for SPAs\n   */\n  setupNavigationListeners() {\n    this.state.set('lastPath', window.location.pathname);\n\n    const checkPathChange = () => {\n      const currentPath = window.location.pathname;\n      const lastPath = this.state.get('lastPath');\n      \n      if (currentPath !== lastPath) {\n        this.pageViewTracker.track(currentPath);\n      }\n    };\n\n    // Listen for history changes\n    window.addEventListener('popstate', checkPathChange);\n\n    // Intercept pushState and replaceState\n    const originalPushState = history.pushState;\n    const originalReplaceState = history.replaceState;\n\n    history.pushState = function() {\n      originalPushState.apply(this, arguments);\n      checkPathChange();\n    };\n\n    history.replaceState = function() {\n      originalReplaceState.apply(this, arguments);\n      checkPathChange();\n    };\n\n    this.logger.log('SPA navigation tracking enabled');\n  }\n}","import { Config } from './core/config.js';\nimport { State } from './core/state.js';\nimport { Session } from './core/session.js';\nimport { Logger } from './utils/logger.js';\nimport { ApiTransport } from './transport/api.js';\nimport { ApiWorkerTransport } from './transport/api-worker.js';\nimport { EventTracker } from './tracking/event.js';\nimport { PingTracker } from './tracking/ping.js';\nimport { PageViewTracker } from './tracking/pageview.js';\nimport { BrowserListeners } from './listeners/browser.js';\nimport { getBrowserMetadata, isBrowser } from './utils/helpers.js';\n\n/**\n * CarbonCut SDK Main Class\n */\nclass CarbonCutSDK {\n  constructor() {\n    this.logger = new Logger(false);\n    this.config = new Config();\n    this.state = new State();\n    this.session = null;\n    this.transport = null;\n    this.eventTracker = null;\n    this.pingTracker = null;\n    this.pageViewTracker = null;\n    this.browserListeners = null;\n    this.googleAds = null;\n    this.autoInitAttempted = false;\n  }\n\n  /**\n   * Extract tracker token and domain from script tag\n   * @returns {Object} Configuration from script tag\n   */\n  getScriptConfig() {\n    // if (typeof document === 'undefined') return null;\n\n    const scripts = document.getElementsByTagName('script');\n    let scriptConfig = null;\n\n    for (let script of scripts) {\n      const src = script.getAttribute('src');\n      \n      if (src && (src.includes('carboncut.min.js') || src.includes('carboncut.js'))) {\n        scriptConfig = {\n          trackerToken: script.getAttribute('data-token') || script.getAttribute('data-tracker-token'),\n          apiUrl: script.getAttribute('data-api-url') || 'http://127.0.0.1:8000/api/v1/events/',\n          debug: script.getAttribute('data-debug') === 'true',\n          domain: script.getAttribute('data-domain') || window.location.hostname,\n          useWorker: script.getAttribute('data-use-worker') !== 'false' // Default true\n        };\n        break;\n      }\n    }\n\n    return scriptConfig;\n  }\n\n  /**\n   * Auto-initialize from script tag attributes\n   */\n  autoInit() {\n    // Prevent multiple auto-init calls\n    if (this.autoInitAttempted || this.isInitializing) {\n      this.logger.warn('Auto-init already attempted or in progress');\n      return;\n    }\n    \n    this.autoInitAttempted = true;\n    this.isInitializing = true;\n\n    const scriptConfig = this.getScriptConfig();\n    \n    if (!scriptConfig || !scriptConfig.trackerToken) {\n      console.error('CarbonCut: No tracker token found. Add data-token attribute to script tag.');\n      this.isInitializing = false;\n      return;\n    }\n\n    this.init(scriptConfig);\n    this.isInitializing = false;\n  }\n\n  /**\n   * Initialize the SDK\n   */\n  init(options = {}) {\n    if (!isBrowser()) {\n      this.logger.error('CarbonCut SDK can only be initialized in a browser environment');\n      return false;\n    }\n\n    if (this.state.get('isInitialized')) {\n      this.logger.warn('CarbonCut is already initialized');\n      return false;\n    }\n\n    // Initialize configuration\n    if (!this.config.init(options)) {\n      return false;\n    }\n\n    // Set debug mode\n    this.logger.setDebug(this.config.get('debug'));\n\n    // Check Do Not Track\n    if (this.config.get('respectDoNotTrack') && navigator.doNotTrack === '1') {\n      this.logger.warn('Do Not Track is enabled, tracking disabled');\n      return false;\n    }\n\n    // Initialize components\n    this.session = new Session(this.config, this.logger);\n    \n    // Use Worker Transport if supported, fallback to regular transport\n    const useWorker = this.config.get('useWorker') !== false; // Default true\n    \n    if (useWorker && typeof Worker !== 'undefined') {\n      this.transport = new ApiWorkerTransport(this.config, this.logger);\n      this.logger.log('Using Web Worker for event processing');\n    } else {\n      this.transport = new ApiTransport(this.config, this.logger);\n      this.logger.log('Using main thread for event processing');\n    }\n    \n    this.eventTracker = new EventTracker(this.config, this.session, this.transport, this.logger);\n    this.pingTracker = new PingTracker(this.config, this.state, this.eventTracker, this.logger);\n    this.pageViewTracker = new PageViewTracker(this.config, this.state, this.eventTracker, this.logger);\n    this.browserListeners = new BrowserListeners(\n      this.config,\n      this.state,\n      this.session,\n      this.eventTracker,\n      this.pingTracker,\n      this.pageViewTracker,\n      this.logger\n    );\n\n\n    // Start session\n    this.session.start();\n\n    // Send session start event\n    this.eventTracker.send('session_start', getBrowserMetadata());\n\n    // Start ping timer\n    this.pingTracker.start();\n\n    // Setup event listeners\n    this.browserListeners.setup();\n\n    // Mark as initialized\n    this.state.set('isInitialized', true);\n\n    this.logger.log('CarbonCut SDK initialized successfully', {\n      sessionId: this.session.getId(),\n      trackerToken: this.config.get('trackerToken'),\n      workerEnabled: useWorker\n    });\n\n    // Auto-trigger Google Ads OAuth if enabled\n    if (this.config.get('autoAuth')) {\n      // Run OAuth in next tick to not block initialization\n      setTimeout(() => {\n        this.initiateGoogleAdsAuth();\n      }, 0);\n    }\n\n    return true;\n  }\n\n  /**\n   * Track a custom event\n   * @param {string} eventName Event name\n   * @param {Object} data Event data\n   */\n  trackEvent(eventName, data = {}) {\n    if (!this.state.get('isInitialized')) {\n      this.logger.error('SDK not initialized. Call init() first');\n      return;\n    }\n\n    this.eventTracker.trackCustomEvent(eventName, data);\n  }\n\n  /**\n   * Track a page view\n   * @param {string} pagePath Page path\n   */\n  trackPageView(pagePath) {\n    if (!this.state.get('isInitialized')) {\n      this.logger.error('SDK not initialized. Call init() first');\n      return;\n    }\n\n    this.pageViewTracker.track(pagePath);\n  }\n\n  /**\n   * Manually trigger a ping\n   */\n  ping() {\n    if (!this.state.get('isInitialized')) {\n      this.logger.error('SDK not initialized. Call init() first');\n      return;\n    }\n\n    this.pingTracker.trigger();\n  }\n\n  /**\n   * Get session information\n   * @returns {Object} Session info\n   */\n  getSessionInfo() {\n    return {\n      sessionId: this.session?.getId() || null,\n      trackerToken: this.config.get('trackerToken'),\n      timeSpent: this.state.get('timeSpent'),\n      isInitialized: this.state.get('isInitialized'),\n      queueSize: this.transport?.getQueueSize() || 0\n    };\n  }\n\n  /**\n   * Enable debug mode\n   */\n  enableDebug() {\n    this.logger.setDebug(true);\n    this.config.set('debug', true);\n  }\n\n  /**\n   * Disable debug mode\n   */\n  disableDebug() {\n    this.logger.setDebug(false);\n    this.config.set('debug', false);\n  }\n\n  /**\n   * Cleanup and terminate\n   */\n  destroy() {\n    this.pingTracker?.stop();\n    this.transport?.terminate?.(); // Terminate worker if exists\n    this.session?.end();\n    this.state.reset();\n    this.logger.log('SDK destroyed');\n  }\n}\n\n// Create singleton instance\nconst carbonCut = new CarbonCutSDK();\n\n// Auto-initialize when DOM is ready (ONLY ONCE)\nif (typeof document !== 'undefined') {\n  // Only attach listener if document is still loading\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      carbonCut.autoInit();\n    }, { once: true }); // ← ADD 'once: true' to ensure single execution\n  } else {\n    // DOM already loaded, init immediately\n    carbonCut.autoInit();\n  }\n}\n\n// Export for different module systems\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = carbonCut;\n}\n\nif (typeof window !== 'undefined') {\n  window.CarbonCut = carbonCut;\n}\n\nexport default carbonCut;"],"names":[],"mappings":"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"}